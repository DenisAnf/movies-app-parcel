const e=/[ \t\r\n\p{P}\s]/gu,t=document.querySelector("#filmName"),u=document.querySelector("#filmAddButton"),n=document.querySelector("#filmError"),c=function(e){//! ИСПРАВИТЬ СЛУШАТЕЛИ
let t=document.querySelector(e);return{outputNode:t,render:function(e){this.outputNode.innerHTML="";let t=document.createElement("ul");t.className="movies__list",e.forEach((e,u)=>{let n=document.createElement("li"),c=document.createElement("label"),i=document.createElement("input"),o=document.createElement("div"),r=document.createElement("span"),l=document.createElement("button");n.className="movies__list-item",c.className="movie",i.className="movie__checkbox",o.className="movie__fakecheckbox",r.className="movie__title",l.className="movie__deleteBtn",n.setAttribute("id",u),i.setAttribute("type","checkbox"),i.setAttribute(e.check,""),l.setAttribute("id",u),r.innerText=e.name,n.appendChild(c),c.appendChild(i),c.appendChild(o),c.appendChild(r),c.appendChild(l),t.appendChild(n),i.addEventListener("click",()=>{"unchecked"===e.check?e.check="checked":e.check="unchecked";//saveFilmsToLocalStorage();
}),l.addEventListener("click",()=>{//films.splice(index, 1);
//saveFilmsToLocalStorage();
//renderFilms();
})}),this.outputNode.appendChild(t)}}}("#movies"),i={movies:[],update:function(e){this.movies=e},create:function(e){return{name:e,check:"unchecked"}},add:function(e){this.movies.push(e)},get:function(){return this.movies},clear:function(){this.movies=[]}},o={key:"movies",read:function(){let e=localStorage.getItem(this.key);if(!e)return null;let t=JSON.parse(e);return Array.isArray(t)?t:null},push:function(e){let t=JSON.stringify(e);localStorage.setItem(this.key,t)}};(()=>{let e=o.read();e&&i.update(e),c.render(i.get()),t.focus()})();const r=()=>{let u=t.value,c=u.length,i=u.replace(e,""),o=i.length;return u&&0!=o?c>130?(n.textContent=`\u{41D}\u{435} \u{431}\u{44B}\u{432}\u{430}\u{435}\u{442} \u{444}\u{438}\u{43B}\u{44C}\u{43C}\u{43E}\u{432} \u{434}\u{43B}\u{438}\u{43D}\u{435}\u{435} 130 \u{441}\u{438}\u{43C}\u{432}\u{43E}\u{43B}\u{43E}\u{432} (${c}/130)`,t.focus(),!0):(n.textContent="",!1):(n.textContent="Введите правильно название фильма",t.focus(),!0)},l=()=>t.value="",a=()=>{if(r())return;let e=i.create(t.value);i.add(e),c.render(i.get()),o.push(i.get()),l()};u.addEventListener("click",a),t.addEventListener("keydown",e=>{13===e.keyCode&&(e.preventDefault(),a(),t.focus())});